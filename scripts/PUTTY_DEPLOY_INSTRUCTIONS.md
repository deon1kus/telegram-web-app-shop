# üîß –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Putty

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—á–µ—Ä–µ–∑ plink)

1. **–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Putty —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** (plink.exe –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ PATH)

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:**
```cmd
scripts\deploy-via-putty.bat
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –í—ã–ø–æ–ª–Ω–∏—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π (—á–µ—Ä–µ–∑ Putty GUI)

#### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ Putty
2. –í–≤–µ–¥–∏—Ç–µ:
   - **Host Name:** `194.87.0.193`
   - **Port:** `22`
   - **Connection type:** SSH
3. –ù–∞–∂–º–∏—Ç–µ **Open**
4. –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω: `root`
5. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: `6BFNsKPHU8`

#### –®–∞–≥ 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

**–ß–µ—Ä–µ–∑ WinSCP –∏–ª–∏ –¥—Ä—É–≥–æ–π SFTP –∫–ª–∏–µ–Ω—Ç:**

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É (—Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã:
   - `scripts/full-deploy.sh` ‚Üí `/root/telegram-bot/`
   - `scripts/update-database.sql` ‚Üí `/root/telegram-bot/scripts/`

**–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (pscp):**

```cmd
pscp -pw 6BFNsKPHU8 scripts\full-deploy.sh root@194.87.0.193:/root/telegram-bot/
pscp -pw 6BFNsKPHU8 scripts\update-database.sql root@194.87.0.193:/root/telegram-bot/scripts/
```

#### –®–∞–≥ 3: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–í Putty –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /root/telegram-bot
chmod +x full-deploy.sh
./full-deploy.sh
```

#### –®–∞–≥ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–∞

–ù–∞–π–¥–∏—Ç–µ –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª (`app.js`, `server.js`, `index.js`) –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```javascript
const telegramWebhookRouter = require('./routes/telegram/webhook');
app.use('/api/telegram', telegramWebhookRouter);
```

#### –®–∞–≥ 5: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –ë–î

–û—Ç–∫—Ä–æ–π—Ç–µ `routes/telegram/webhook.js` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –≤–∞—à–µ–π –ë–î.

#### –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
mysql -u root -p your_database_name < scripts/update-database.sql
```

#### –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook

```bash
chmod +x scripts/setup-webhook.sh
./scripts/setup-webhook.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
curl -X POST "https://api.telegram.org/bot7811866862:AAH4z4mpba_o-fRCdgDv09Ej8nTy-QkzId8/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://194.87.0.193/api/telegram/webhook",
    "allowed_updates": ["channel_post", "edited_channel_post"]
  }'
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å HTTPS. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —á–µ—Ä–µ–∑ Let's Encrypt.

#### –®–∞–≥ 8: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
pm2 restart telegram-bot
# –∏–ª–∏
systemctl restart telegram-bot
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª `-1003271699368`:
```
üìù –¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä

üí∞ –¶–µ–Ω–∞: 10000 —Ç–æ–º–∞–Ω
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
pm2 logs telegram-bot --lines 50
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª–µ (–¥–æ–ª–∂–µ–Ω –¥–æ–±–∞–≤–∏—Ç—å—Å—è `#product_id`)
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `DEPLOYMENT_BACKEND.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `BACKEND_READY.md` - —á–µ–∫–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- `QUICK_DEPLOY.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

